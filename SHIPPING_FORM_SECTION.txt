<!-- REEMPLAZAR LA SECCIÓN "Shipping Address" (líneas 98-177) EN checkout/index.blade.php CON ESTE CÓDIGO: -->

                    <!-- Shipping Address -->
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h2 class="font-spartan text-xl font-bold text-dark-turquoise mb-4">
                            DIRECCIÓN DE ENVÍO
                        </h2>

                        <div class="space-y-4" id="shipping-fields">
                            <div>
                                <label class="block text-sm font-semibold text-gray-brown mb-2">Dirección *</label>
                                <textarea name="shipping_address" id="shipping_address" rows="2" required
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-dark-turquoise focus:border-transparent"
                                    placeholder="Calle principal, número, sector">{{ old('shipping_address') }}</textarea>
                                @error('shipping_address')
                                    <p class="text-red-500 text-xs mt-1">{{ $message }}</p>
                                @enderror
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-brown mb-2">Provincia *</label>
                                    <select name="shipping_provincia" id="shipping_provincia" required
                                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-dark-turquoise focus:border-transparent">
                                        <option value="">Seleccionar provincia...</option>
                                        @foreach($provincias as $prov)
                                            <option value="{{ $prov }}" {{ old('shipping_provincia') === $prov ? 'selected' : '' }}>
                                                {{ $prov }}
                                            </option>
                                        @endforeach
                                    </select>
                                    @error('shipping_provincia')
                                        <p class="text-red-500 text-xs mt-1">{{ $message }}</p>
                                    @enderror
                                </div>

                                <div>
                                    <label class="block text-sm font-semibold text-gray-brown mb-2">Cantón *</label>
                                    <select name="shipping_canton" id="shipping_canton" required
                                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-dark-turquoise focus:border-transparent"
                                        {{ !old('shipping_provincia') ? 'disabled' : '' }}>
                                        <option value="">Seleccionar cantón...</option>
                                        @if(old('shipping_provincia'))
                                            @foreach($cantones ?? [] as $cant)
                                                <option value="{{ $cant }}" {{ old('shipping_canton') === $cant ? 'selected' : '' }}>
                                                    {{ $cant }}
                                                </option>
                                            @endforeach
                                        @endif
                                    </select>
                                    @error('shipping_canton')
                                        <p class="text-red-500 text-xs mt-1">{{ $message }}</p>
                                    @enderror
                                </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-brown mb-2">Parroquia *</label>
                                    <select name="shipping_parroquia" id="shipping_parroquia" required
                                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-dark-turquoise focus:border-transparent"
                                        {{ !old('shipping_canton') ? 'disabled' : '' }}>
                                        <option value="">Seleccionar parroquia...</option>
                                        @if(old('shipping_canton'))
                                            @foreach($parroquias ?? [] as $parr)
                                                <option value="{{ $parr }}" {{ old('shipping_parroquia') === $parr ? 'selected' : '' }}>
                                                    {{ $parr }}
                                                </option>
                                            @endforeach
                                        @endif
                                    </select>
                                    @error('shipping_parroquia')
                                        <p class="text-red-500 text-xs mt-1">{{ $message }}</p>
                                    @enderror
                                </div>

                                <div>
                                    <label class="block text-sm font-semibold text-gray-brown mb-2">Código Postal</label>
                                    <input type="text" name="shipping_zip" id="shipping_zip" value="{{ old('shipping_zip') }}"
                                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-dark-turquoise focus:border-transparent"
                                        placeholder="170150">
                                    @error('shipping_zip')
                                        <p class="text-red-500 text-xs mt-1">{{ $message }}</p>
                                    @enderror
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-semibold text-gray-brown mb-2">País *</label>
                                <input type="text" name="shipping_country" id="shipping_country" value="{{ old('shipping_country', 'Ecuador') }}" required
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-dark-turquoise focus:border-transparent"
                                    readonly>
                                @error('shipping_country')
                                    <p class="text-red-500 text-xs mt-1">{{ $message }}</p>
                                @enderror
                            </div>
                        </div>
                    </div>
